!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){var b;!function(b){function c(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return b.DEBUG?(console.log.apply(console,a),function(){console.trace()}):void 0}function d(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return b.DEBUG?(console.warn.apply(console,a),function(){console.trace()}):void 0}function e(a,b){if(null==a)return String(a);var c=i[i.toString.call(a)]||"object";return b?c==b:c}function f(a,b){return g(a)?a:b}function g(a){return"undefined"!=typeof a}function h(b){return g(b)||(b="div"),a(document.createElement(b))}b.DEBUG=!0,b.log=c,b.warn=d;var i={};"Number String Boolean Function RegExp Array Date Error".split(" ").forEach(function(a){i["[object "+a+"]"]=a.toLowerCase()}),b.kindOf=e,b.def=f,b.defined=g,b.cre=h}(b||(b={}));var b;!function(a){var b;!function(a){function b(a,b){function c(a,b,c){var d,e=j[b];"undefined"!=typeof e&&(d=e-i.getDay(),0===d?d=7*c:d>0&&"last"===a?d-=7:0>d&&"next"===a&&(d+=7),i.setDate(i.getDate()+d))}function d(a){var b=a.split(" "),d=b[0],e=b[1].substring(0,3),f=/\d+/.test(d),g="ago"===b[2],h=("last"===d?-1:1)*(g?-1:1);if(f&&(h*=parseInt(d,10)),k.hasOwnProperty(e)&&!b[1].match(/^mon(day|\.)?$/i))return i["set"+k[e]](i["get"+k[e]]()+h);if("wee"===e)return i.setDate(i.getDate()+7*h);if("next"===d||"last"===d)c(d,e,h);else if(!f)return!1;return!0}b||(b=(new Date).getTime());var e,f,g,h,i,j,k,l,m,n,o,p=!1;if(!a)return p;if(a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),f=a.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/),f&&f[2]===f[4])if(f[1]>1901)switch(f[2]){case"-":return f[3]>12||f[5]>31?p:new Date(f[1],parseInt(f[3],10)-1,f[5],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3;case".":return p;case"/":return f[3]>12||f[5]>31?p:new Date(f[1],parseInt(f[3],10)-1,f[5],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3}else if(f[5]>1901)switch(f[2]){case"-":return f[3]>12||f[1]>31?p:new Date(f[5],parseInt(f[3],10)-1,f[1],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3;case".":return f[3]>12||f[1]>31?p:new Date(f[5],parseInt(f[3],10)-1,f[1],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3;case"/":return f[1]>12||f[3]>31?p:new Date(f[5],parseInt(f[1],10)-1,f[3],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3}else switch(f[2]){case"-":return f[3]>12||f[5]>31||f[1]<70&&f[1]>38?p:(h=f[1]>=0&&f[1]<=38?+f[1]+2e3:f[1],new Date(h,parseInt(f[3],10)-1,f[5],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3);case".":return f[5]>=70?f[3]>12||f[1]>31?p:new Date(f[5],parseInt(f[3],10)-1,f[1],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3:f[5]<60&&!f[6]?f[1]>23||f[3]>59?p:(g=new Date,new Date(g.getFullYear(),g.getMonth(),g.getDate(),f[1]||0,f[3]||0,f[5]||0,f[9]||0)/1e3):p;case"/":return f[1]>12||f[3]>31||f[5]<70&&f[5]>38?p:(h=f[5]>=0&&f[5]<=38?+f[5]+2e3:f[5],new Date(h,parseInt(f[1],10)-1,f[3],f[6]||0,f[7]||0,f[8]||0,f[9]||0)/1e3);case":":return f[1]>23||f[3]>59||f[5]>59?p:(g=new Date,new Date(g.getFullYear(),g.getMonth(),g.getDate(),f[1]||0,f[3]||0,f[5]||0)/1e3)}if("now"===a)return null===b||isNaN(b)?(new Date).getTime()/1e3|0:0|b;if(!isNaN(e=Date.parse(a)))return e/1e3|0;if(i=b?new Date(1e3*b):new Date,j={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},k={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},m="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",n="([+-]?\\d+\\s"+m+"|(last|next)\\s"+m+")(\\sago)?",f=a.match(new RegExp(n,"gi")),!f)return p;for(o=0,l=f.length;l>o;o++)if(!d(f[o]))return p;return i.getTime()/1e3}a.strtotime=b}(b=a.php||(a.php={}))}(b||(b={}));var b;!function(a){function b(a,b){var c={};return c[a]=1===b.length?b[0]:b,c}function c(a){return function(c,d){return b(a,d.params)}}a.bindingParam=b,a.bindingWithParam=c,a.ruleBindings={accepted:c("accepted"),alpha:"alpha",alpha_num:"alphanumeric",alpha_dash:"alpha_dash",after:c("after"),before:c("before"),between:function(c,d){return b("between_"+a.getElementType(c),d.params)},"boolean":"boolean",confirmed:"confirmed",date:"date",different:"different",digits:c("digits"),digits_between:c("digits_between"),email:"email","in":c("in"),integer:"integer",ip:"ipv4",json:"json",max:function(c,d){return b("max_"+a.getElementType(c),d.params)},min:function(c,d){return b("min_"+a.getElementType(c),d.params)},mimes:c("mimes"),not_in:c("not_in"),numeric:"number",required:"required",required_if:c("required_if"),required_with:c("required_with"),required_with_all:c("required_with_all"),required_without:c("required_without"),required_without_all:c("required_without_all"),same:c("equalTo"),size:function(c,d){return b("size_"+a.getElementType(c),d.params)},url:"url",laraval_ajax:"laraval_ajax"}}(b||(b={}));var b;!function(a){var b;!function(a){function b(a,b){var c,d;for(c=0;this.errorList[c];c++)d=this.errorList[c],this.settings.highlight&&this.settings.highlight.call(this,d.element,this.settings.errorClass,this.settings.validClass),this.showLabel(d.element,d.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(c=0;this.successList[c];c++)this.showLabel(this.successList[c]);this.toHide=this.toHide.not(this.toShow);var e=this;this.settings.unhighlight&&this.toHide.each(function(){e.settings.unhighlight.call(e,this,e.settings.validClass,e.settings.errorClass)}),this.hideErrors(),this.addWrapper(this.toShow).show()}a.showErrors=b}(b=a.ajaxStrategy||(a.ajaxStrategy={}))}(b||(b={}));var b;!function(b){var c;!function(c){function d(c){var d={},e=a.data(c.form,"validator"),f=e.settings.laraval;if("local"===f.strategy)a.each(b.getElementRules(c),function(e,f){a.extend(d,b.convertRule(c,f))});else if("ajax2"===f.strategy){var g={__laraval_validate_field_name:c.name};a(e.currentForm).serializeArray().forEach(function(a){g[a.name]=a.value}),d.laraval_ajax={url:f.url,method:"post",data:g}}else"ajax2"===f.strategy;return d}function e(b){return a.extend(!0,a.validator.defaults,b)}function f(b,c){var d=a.data(c.form,"validator");return d.settings.laraval.enabled===!0&&(b=a.extend(b,a.validator.laravalRules(c))),g.call(this,b,c)}var g=(a.validator.format,a.validator.normalizeRules);c.defaults={laraval:{enabled:!1,strategy:"local",dataAttribute:"laraval",url:"",singleFieldReferenceKey:"",crsfTokenKey:"_token",crsfToken:function(a){a.findByName(a.settings.laraval.crsfToken).val()},ajaxSettings:a.extend({},a.ajaxSettings,{method:"post",type:"POST"}),formValidationSuccess:function(a,b){this.showErrors(b)},elementValidationSuccess:function(a,b){this.showErrors()}}};var h;!function(c){function d(){return"ajax"===this.settings.laraval.strategy&&(this.settings.showErrors=b.ajaxStrategy.showErrors.bind(this)),i.call(this)}function e(){if("ajax"!==this.settings.laraval.strategy)return j.call(this);this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap);var b=this;console.log("validate ajax form",a.extend(!0,{},b)),a.ajax(a.extend(!0,{},this.settings.laraval.ajaxSettings,{url:this.settings.laraval.url,data:a(this.currentForm).serializeArray(),success:function(c){console.log("ajax method",c);var d={};a.each(c,function(a,c){b.findByName(a).length>0&&(d[a]=c)}),b.settings.laraval.formValidationSuccess&&b.settings.laraval.formValidationSuccess.call(b,c,d)}}))}function f(b){if("ajax"!==this.settings.laraval.strategy)return k.call(this);var c=this.settings.laraval,d=this.clean(b),e=this.validationTargetFor(d),f=!0;this.lastElement=e;var g={};g[c.crsfTokenKey]=c.crsfToken(this),g[c.singleFieldReferenceKey]=d.name,a(this.currentForm).serializeArray().forEach(function(a){"undefined"==typeof g[a.name]&&(g[a.name]=a.value)});var h=this;a.ajax(a.extend(!0,{},this.settings.laraval.ajaxSettings,{url:this.settings.laraval.url,data:g,success:function(b){console.log("ajax element",b);var c={};"undefined"===e?delete h.invalid[d.name]:(h.prepareElement(e),h.currentElements=a(e),f=b===!0||"true"===b,f?("undefined"!=typeof h.invalid[e.name]&&delete h.invalid[e.name],h.showErrors()):(c[d.name]=b[d.name],h.invalid[e.name]=!0,h.showErrors(c))),a(e).attr.call(a(e),"aria-invalid",!f),h.numberOfInvalids()||(h.toHide=h.toHide.add(h.containers)),h.settings.laraval.elementValidationSuccess}}))}function g(a){b.DEBUG&&0===this.pendingRequest&&(console.time("Validation Request"),console.groupCollapsed("Validation Request"),console.profile("Validation Request")),l.apply(this,[a])}function h(a,c){m.apply(this,[a,c]),b.DEBUG&&0===this.pendingRequest&&(console.log("this.pendingRequest = 0"),console.profileEnd(),console.groupEnd(),console.timeEnd("Validation Request"))}var i=a.validator.prototype.init,j=a.validator.prototype.form,k=a.validator.prototype.element,l=a.validator.prototype.startRequest,m=a.validator.prototype.stopRequest;c.init=d,c.form=e,c.element=f,c.startRequest=g,c.stopRequest=h}(h=c.prototype||(c.prototype={})),c.laravalRules=d,c.setDefaults=e,c.normalizeRules=f}(c=b.validator||(b.validator={}))}(b||(b={}));var b;!function(b){var c;!function(c){function d(a){return new Date(a).getTime()/1e3}function e(a){try{JSON.parse(a)}catch(b){return!1}return!0}function f(c,d){var e=b.getElementType(d);if("string"===e||""===e)return c.length;if("numeric"===e)return parseInt(c);if("file"===e){var f=d.files[0].size;return d.multiple&&(f=0,a.makeArray(d.files).forEach(function(a){f+=a.size})),console.log("file size ",f,d),f}return c.length}var g=a.validator.methods;c.methods={alpha:function(a,b,c){return this.optional(b)||/^[a-z]+$/i.test(a)},alpha_dash:function(a,b,c){return this.optional(b)||/^[\w_-]+$/i.test(a)},after:function(a,b,c){var e=d(a),f=this.findByName(c),g=d(f.length>0?f.val():c);return this.optional(b)||e>g},before:function(a,b,c){var e=d(a),f=this.findByName(c),g=d(f.length>0?f.val():c);return this.optional(b)||g>e},between_numeric:function(a,b,c){return this.optional(b)||g.min.call(this,a,b,c[0])&&g.max.call(this,a,b,c[1])},between_string:function(a,b,c){return this.optional(b)||g.minlength.call(this,a,b,c[0])&&g.maxlength.call(this,a,b,c[1])},between_file:function(a,b,c){return this.optional(b)||g.min.call(this,f(a,b),b,c[0])&&g.max.call(this,f(a,b),b,c[1])},between_array:function(a,b,c){return this.optional(b)||g.min.call(this,a,b,b.size)&&g.max.call(this,a,b,b.size)},confirmed:function(a,b,c){var d=this.findByName(b.name="_confirmation");return 0===d.length?!0:d.val()===a},different:function(a,b,c){var d=this.findByName(c);return 0===d.length?!0:d.val()!==a},digits:function(a,b,c){return g.required.call(this,a,b)&&a.toString().length===parseInt(c)},digits_between:function(a,b,c){return g.required.call(this,a,b)&&a.toString().length>=parseInt(c[0])&&a.toString().length<=parseInt(c[0])},mimes:function(b,c,d){var e,f,g="string"==typeof d?d.replace(/\s/g,"").replace(/,/g,"|"):"image/*",h=this.optional(c);if(h)return h;if("file"===a(c).attr("type")&&(g=g.replace(/\*/g,".*"),c.files&&c.files.length))for(e=0;e<c.files.length;e++)if(f=c.files[e],!f.type.match(new RegExp(".?("+g+")$","i")))return!1;return!0},min_numeric:function(a,b,c){return this.optional(b)||g.min.call(this,a,b,c)},min_string:function(a,b,c){return this.optional(b)||g.minlength.call(this,a,b,c)},min_file:function(a,b,c){return this.optional(b)||g.min.call(this,f(a,b),b,c)},min_array:function(a,b,c){return this.optional(b)||g.min.call(this,a,b,c)},integer:function(a,b,c){return this.optional(b)||/^-?\d+$/.test(a)},ipv4:function(a,b,c){return this.optional(b)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(a)},ipv6:function(a,b,c){return this.optional(b)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(a)},max_numeric:function(a,b,c){return this.optional(b)||g.max.call(this,a,b,c)},max_string:function(a,b,c){return this.optional(b)||g.maxlength.call(this,a,b,c)},max_file:function(a,b,c){return this.optional(b)||g.max.call(this,f(a,b),b,c)},max_array:function(a,b,c){return this.optional(b)||g.max.call(this,a,b,b.size)},"boolean":function(a,b,c){var d=[!0,!1,1,0,"1","0"].indexOf(a);return-1!==d},"in":function(a,b,c){return this.optional(b)||-1!==c.indexOf(a)},json:function(a,b,c){return this.optional(b)||e(a)},not_in:function(a,b,c){return this.optional(b)||-1===c.indexOf(a)},required_if:function(a,b,c){var d=this.findByName(c[0]);return d.length>0&&d.val()==c[1]?g.required.call(this,a,b):!0},required_with:function(a,b,c){var d=this,e=!1;return c.forEach(function(a){d.findByName(a).length>0&&(e=!0)}),e?g.required.call(this,a,b):!0},required_with_all:function(a,b,c){var d=this,e=0;return c.forEach(function(a){d.findByName(a).length>0&&e++}),e===c.length?g.required.call(this,a,b):!0},required_without:function(a,b,c){var d=this,e=!1;return c.forEach(function(a){0===d.findByName(a).length&&(e=!0)}),e?g.required.call(this,a,b):!0},required_without_all:function(a,b,c){var d=this,e=0;return c.forEach(function(a){0===d.findByName(a).length&&e++}),e===c.length?g.required.call(this,a,b):!0},size_numeric:function(a,b,c){return this.optional(b)||f(a,b)===parseInt(c)},size_string:function(a,b,c){return this.optional(b)||f(a,b)===parseInt(c)},size_file:function(a,b,c){return this.optional(b)||f(a,b)===parseInt(c)},size_array:function(a,b,c){return this.optional(b)||f(a,b)===parseInt(c)}}}(c=b.validator||(b.validator={}))}(b||(b={}));var b;!function(b){function c(b){b=b.replace(/(\:attribute)/g,a.validator.laraval.attributeReplacer);var c=/(\:[\w_]*)/,d=0;if(c.test(b)){for(;c.test(b);)b=b.replace(c,"{"+d+"}"),d++;return a.validator.format(b)}return b}function d(b,c){a.validator.messages[b]=a.validator.laraval.formatMessage(c)}function e(b){a.each(b,function(b,c){a.validator.laraval.addMessage(b,c)})}b.attributeReplacer="field",b.formatMessage=c,b.addMessage=d,b.addMessages=e}(b||(b={}));var b;!function(b){function c(b,c){var d={},e=a.validator.laraval.ruleBindings[c.name],f=typeof e;return"undefined"===f||("string"===f?d[e]=!0:"function"===f&&a.extend(d,e.call(b,b,c))),d}function d(a){void 0===a&&(a="");var b=[];return 0===a.length?b:(a.split("|").forEach(function(a){var c,d=a;if(-1!==a.indexOf(":")){var e=a.split(":",1),f=a.slice(a.indexOf(":")+1);d=e[0],c=-1!==f.indexOf(",")?f.split(","):[f]}b.push({name:d,params:c})}),b)}function e(c){var e=a.data(c.form,"validator"),f=e.settings.laraval.dataAttribute,g=a.extend(!0,{},a(c.form).data(f));return b.defined(g[c.name])?d(g[c.name]):[]}function f(a,b){for(var c in b)if(b[c].name===a)return c}function g(c){var g=a.data(c.form,"validator"),h=g.settings.laraval.dataAttribute,i=d(a(c).data(h)),j=e(c);return a.each(j,function(a,c){var d=f(c.name,i);b.defined(d)?i[d]=c:i.push(c)}),i}function h(a){var b=a.nodeName.toLowerCase(),c="string";if("input"===b)switch(a.getAttribute("type")){case"number":c="numeric";break;case"date":c="date";break;case"file":c="file"}return c}function i(b){void 0===b&&(b={}),a.extend(a.validator.defaults.laraval.config,b)}b.convertRule=c,b.parseRules=d,b.getElementFormRules=e,b.getRuleByName=f,b.getElementRules=g,b.getElementType=h,b.addConfig=i}(b||(b={})),a.extend(!0,a.validator,b.validator),a.validator.laraval=b});